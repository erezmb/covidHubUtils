<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tools for working with COVID-19 Forecast Hub data: a brief tour of the `covidHubUtils` R package • covidHubUtils</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Tools for working with COVID-19 Forecast Hub data: a brief tour of the `covidHubUtils` R package">
<meta property="og:description" content="covidHubUtils">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">covidHubUtils</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/covidHubUtils-overview.html">Tools for working with COVID-19 Forecast Hub data: a brief tour of the `covidHubUtils` R package</a>
    </li>
    <li>
      <a href="../articles/covidHubUtils-zoltar_sqlite_setup.html">Setup Instructions: Load Forecasts from Local Zoltar sqlite File</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/reichlab/covidHubUtils/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="covidHubUtils-overview_files/htmlwidgets-1.5.4/htmlwidgets.js"></script><link href="covidHubUtils-overview_files/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="covidHubUtils-overview_files/datatables-binding-0.26/datatables.js"></script><link href="covidHubUtils-overview_files/dt-core-1.12.1/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="covidHubUtils-overview_files/dt-core-1.12.1/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="covidHubUtils-overview_files/dt-core-1.12.1/js/jquery.dataTables.min.js"></script><link href="covidHubUtils-overview_files/dt-ext-fixedcolumns-1.12.1/css/fixedColumns.dataTables.min.css" rel="stylesheet">
<script src="covidHubUtils-overview_files/dt-ext-fixedcolumns-1.12.1/js/dataTables.fixedColumns.min.js"></script><link href="covidHubUtils-overview_files/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="covidHubUtils-overview_files/crosstalk-1.2.0/js/crosstalk.min.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Tools for working with COVID-19 Forecast Hub
data: a brief tour of the <code>covidHubUtils</code> R package</h1>
                        <h4 data-toc-skip class="author">Serena Wang,
Evan L Ray, Nicholas G Reich, Apurv Shah</h4>
            
            <h4 data-toc-skip class="date">18 November 2022</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/reichlab/covidHubUtils/blob/HEAD/vignettes/covidHubUtils-overview.Rmd" class="external-link"><code>vignettes/covidHubUtils-overview.Rmd</code></a></small>
      <div class="hidden name"><code>covidHubUtils-overview.Rmd</code></div>

    </div>

    
    
<!-- code to run rmarkdown::render(input="./vignettes/covidHubUtils-overview.Rmd") -->
<!-- Code for adding logo at the top -->
<style>
#TOC {
  background: url("https://github.com/reichlab/covid19-forecast-hub-web/raw/master/images/forecast-hub-logo_DARKBLUE-20px-padding.png");
  background-size: contain;
  padding-top: 80px !important;
  background-repeat: no-repeat;
}
</style>
<div class="section level2">
<h2 id="introduction-and-background">Introduction and background<a class="anchor" aria-label="anchor" href="#introduction-and-background"></a>
</h2>
<p>The <a href="https://covid19forecasthub.org/" class="external-link">COVID-19 Forecast
Hub</a> is a central repository for modeler-contributed short-term
forecasts of COVID-19 trends in the US. The US Centers for Disease
Control and Prevention (CDC) displays forecasts from the Forecast Hub on
its <a href="https://www.cdc.gov/coronavirus/2019-ncov/covid-data/mathematical-modeling.html" class="external-link">modeling
and forecasting webpages</a>.</p>
<p>The Forecast Hub has been curating forecast data since April 2020,
and has collected over 150 million unique rows of forecast data. These
data are stored in our <a href="https://github.com/reichlab/covid19-forecast-hub" class="external-link">public GitHub
repository</a> and in the <a href="https://zoltardata.com/" class="external-link">Zoltar
forecast archive</a>.</p>
<p>The goal of the <code>covidHubUtils</code> R package is to create a
set of basic utility functions for accessing, visualizing, and scoring
forecasts from the COVID-19 Forecast Hub.</p>
</div>
<div class="section level2">
<h2 id="installation-and-set-up">Installation and set-up<a class="anchor" aria-label="anchor" href="#installation-and-set-up"></a>
</h2>
<p>The <code>covidHubUtils</code> package relies on a small number of
packages, including many from the <code>tidyverse</code> and,
importantly, <a href="http://reichlab.io/zoltr/" class="external-link">the <code>zoltr</code>
package</a> that is used to access the Zoltar API for downloading
forecasts. Please install <code>zoltr</code> from GitHub, as this
development version often has important features not yet on the CRAN
version:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"reichlab/zoltr"</span><span class="op">)</span></span></code></pre></div>
<p>The <code>covidHubUtils</code> package currently is only available on
GitHub, and it may be installed using the <code>remotes</code>
package:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"reichlab/covidHubUtils"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="working-with-forecast-data">Working with forecast data<a class="anchor" aria-label="anchor" href="#working-with-forecast-data"></a>
</h2>
<p>One of the key features of the COVID-19 Forecast Hub is making
millions of rows of forecast data available in a standard format for
easy analysis and visualization. The <code>covidHubUtils</code> package
allows for users to download data into an R session either by reading
files from a local clone of <a href="https://github.com/reichlab/covid19-forecast-hub" class="external-link">the COVID-19
Forecast Hub repository</a> or by downloading data from the Zoltar API.
(While Zoltar currently requires a user account to download data via the
API, we have created a specific user account for
<code>covidHubUtils</code> so that a user account is not needed.)</p>
<p>We have identified two central use cases for downloading data using
<code><a href="../reference/load_forecasts.html">load_forecasts()</a></code>:</p>
<ol style="list-style-type: decimal">
<li><p>Downloading the “latest” forecasts for selected models that might
be submitted in a short period of time. This is achieved by using
<code>dates</code> and <code>date_window_size</code>
parameters.</p></li>
<li><p>Downloading all available forecasts for selected models that are
submitted on a set of dates. This is achieved by using a vector of dates
in <code>dates</code> parameter.</p></li>
</ol>
<p>Below are some examples of reading in data. We start by loading the
<code>covidHubUtils</code> package and the <code>tidyverse</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/reichlab/covidHubUtils" class="external-link">covidHubUtils</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/RevolutionAnalytics/doparallel" class="external-link">doParallel</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme_get.html" class="external-link">theme_set</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="load-and-plot-single-forecast">Load and plot single forecast<a class="anchor" aria-label="anchor" href="#load-and-plot-single-forecast"></a>
</h3>
<p>The following code loads forecasts from Zoltar for the
COVIDhub-ensemble model. Note that the <code>date_window_size</code>
parameter specifies the range of days to look at for a forecast.
<code>date_window_size</code> will be applied to every date in
<code>dates</code> parameter to create a list of potential forecast
dates to look at. All queries below are looking for the most recent
forecast from COVIDhub-ensemble in the span of 2021-03-02 through
2021-03-08. In this case, for each day in <code>dates</code>,
<code>date_window_size = 6</code> covers a full week, starting from 6
days before a date and going up through the user-provided date. By
default, <code>date_window_size</code> is set to 0 to use all forecast
dates in <code>dates</code> only.</p>
<p>We also provide examples to load incident hospitalization forecasts
and incident death forecasts here by changing <code>targets</code> to
the desired quantity.</p>
<p>The <code>verbose</code> parameter has been explicitly set to
<code>FALSE</code> to prevent output from the internal helper function
in <code><a href="../reference/load_forecasts.html">load_forecasts()</a></code>. It is set to <code>TRUE</code> by
default and all information will be printed in the console.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load forecasts that were submitted in a time window from zoltar</span></span>
<span><span class="va">inc_case_targets</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="st">"wk ahead inc case"</span><span class="op">)</span></span>
<span><span class="va">forecasts_case</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_forecasts.html">load_forecasts</a></span><span class="op">(</span></span>
<span>  models <span class="op">=</span> <span class="st">"COVIDhub-ensemble"</span>,</span>
<span>  dates <span class="op">=</span> <span class="st">"2021-03-08"</span>,</span>
<span>  date_window_size <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  locations <span class="op">=</span> <span class="st">"US"</span>,</span>
<span>  types <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"point"</span>, <span class="st">"quantile"</span><span class="op">)</span>,</span>
<span>  targets <span class="op">=</span> <span class="va">inc_case_targets</span>,</span>
<span>  source <span class="op">=</span> <span class="st">"zoltar"</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  as_of <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  hub <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"US"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">inc_hosp_targets</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">130</span>, <span class="st">"day ahead inc hosp"</span><span class="op">)</span></span>
<span><span class="va">forecasts_hosp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_forecasts.html">load_forecasts</a></span><span class="op">(</span></span>
<span>  models <span class="op">=</span> <span class="st">"COVIDhub-ensemble"</span>,</span>
<span>  dates <span class="op">=</span> <span class="st">"2021-03-08"</span>,</span>
<span>  date_window_size <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  locations <span class="op">=</span> <span class="st">"US"</span>,</span>
<span>  types <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"point"</span>, <span class="st">"quantile"</span><span class="op">)</span>,</span>
<span>  targets <span class="op">=</span> <span class="va">inc_hosp_targets</span>,</span>
<span>  source <span class="op">=</span> <span class="st">"zoltar"</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  as_of <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  hub <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"US"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">inc_death_targets</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="st">"wk ahead inc death"</span><span class="op">)</span></span>
<span><span class="va">forecasts_death</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_forecasts.html">load_forecasts</a></span><span class="op">(</span></span>
<span>  models <span class="op">=</span> <span class="st">"COVIDhub-ensemble"</span>,</span>
<span>  dates <span class="op">=</span> <span class="st">"2021-03-08"</span>,</span>
<span>  date_window_size <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  locations <span class="op">=</span> <span class="st">"US"</span>,</span>
<span>  types <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"point"</span>, <span class="st">"quantile"</span><span class="op">)</span>,</span>
<span>  targets <span class="op">=</span> <span class="va">inc_death_targets</span>,</span>
<span>  source <span class="op">=</span> <span class="st">"zoltar"</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  as_of <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  hub <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"US"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Here are the top rows of the data frame from the query of incident
case forecasts. In addition to the essential forecast data, a few
columns with location information are also returned. Tables of the other
target variables look similar. Note that one row corresponds either to a
point or a single quantile prediction. Details of the underlying data
format are described in detail <a href="https://github.com/reichlab/covid19-forecast-hub/blob/master/data-processed/README.md#forecast-file-format" class="external-link">here</a>.</p>
<div id="htmlwidget-e85c31135153eeeb3dc3" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-e85c31135153eeeb3dc3">{"x":{"filter":"none","vertical":false,"extensions":["FixedColumns"],"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32"],["COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble"],["2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08"],["US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US"],["1","1","1","1","1","1","1","1","2","2","2","2","2","2","2","2","3","3","3","3","3","3","3","3","4","4","4","4","4","4","4","4"],["wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk"],["inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case"],["2021-03-13","2021-03-13","2021-03-13","2021-03-13","2021-03-13","2021-03-13","2021-03-13","2021-03-13","2021-03-20","2021-03-20","2021-03-20","2021-03-20","2021-03-20","2021-03-20","2021-03-20","2021-03-20","2021-03-27","2021-03-27","2021-03-27","2021-03-27","2021-03-27","2021-03-27","2021-03-27","2021-03-27","2021-04-03","2021-04-03","2021-04-03","2021-04-03","2021-04-03","2021-04-03","2021-04-03","2021-04-03"],["point","quantile","quantile","quantile","quantile","quantile","quantile","quantile","point","quantile","quantile","quantile","quantile","quantile","quantile","quantile","point","quantile","quantile","quantile","quantile","quantile","quantile","quantile","point","quantile","quantile","quantile","quantile","quantile","quantile","quantile"],[null,0.025,0.1,0.25,0.5,0.75,0.9,0.975,null,0.025,0.1,0.25,0.5,0.75,0.9,0.975,null,0.025,0.1,0.25,0.5,0.75,0.9,0.975,null,0.025,0.1,0.25,0.5,0.75,0.9,0.975],[380727,278275,313135,341718,380727,420485,454859,516116,344190,234101,264546,307321,344190,404501,456763,530944,319703,181530,235489,264871,319703,396798,484256,545275,313292,158521,208626,244528,313292,400001,480328,543420],["United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States"],[332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137],["state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state"],["us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us"],["US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US"],["United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>model<\/th>\n      <th>forecast_date<\/th>\n      <th>location<\/th>\n      <th>horizon<\/th>\n      <th>temporal_resolution<\/th>\n      <th>target_variable<\/th>\n      <th>target_end_date<\/th>\n      <th>type<\/th>\n      <th>quantile<\/th>\n      <th>value<\/th>\n      <th>location_name<\/th>\n      <th>population<\/th>\n      <th>geo_type<\/th>\n      <th>geo_value<\/th>\n      <th>abbreviation<\/th>\n      <th>full_location_name<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"t","scrollX":true,"fixedColumns":{"leftColumns":2},"columnDefs":[{"className":"dt-right","targets":[9,10,12]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><p>This data can then be plotted directly with a call to
<code><a href="../reference/plot_forecasts.html">plot_forecasts()</a></code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_forecasts.html">plot_forecasts</a></span><span class="op">(</span></span>
<span>  forecast_data <span class="op">=</span> <span class="va">forecasts_case</span>,</span>
<span>  truth_source <span class="op">=</span> <span class="st">"JHU"</span>,</span>
<span>  target_variable <span class="op">=</span> <span class="st">"inc case"</span>,</span>
<span>  intervals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.5</span>, <span class="fl">.8</span>, <span class="fl">.95</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="covidHubUtils-overview_files/figure-html/unnamed-chunk-6-1.png" width="960"></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p_hosp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_forecasts.html">plot_forecasts</a></span><span class="op">(</span></span>
<span>  forecast_data <span class="op">=</span> <span class="va">forecasts_hosp</span>,</span>
<span>  truth_source <span class="op">=</span> <span class="st">"HealthData"</span>,</span>
<span>  target_variable <span class="op">=</span> <span class="st">"inc hosp"</span>,</span>
<span>  intervals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.5</span>, <span class="fl">.8</span>, <span class="fl">.95</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="covidHubUtils-overview_files/figure-html/unnamed-chunk-6-2.png" width="960"></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p_death</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_forecasts.html">plot_forecasts</a></span><span class="op">(</span></span>
<span>  forecast_data <span class="op">=</span> <span class="va">forecasts_death</span>,</span>
<span>  truth_source <span class="op">=</span> <span class="st">"JHU"</span>,</span>
<span>  target_variable <span class="op">=</span> <span class="st">"inc death"</span>,</span>
<span>  intervals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.5</span>, <span class="fl">.8</span>, <span class="fl">.95</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="covidHubUtils-overview_files/figure-html/unnamed-chunk-6-3.png" width="960">
Additionally, you could also modify the resulting plot object by adding
<code>ggplot</code> components. For example, if you want to change the
way the x-axis handles dates, you could add a
<code><a href="https://ggplot2.tidyverse.org/reference/scale_date.html" class="external-link">ggplot2::scale_x_date()</a></code> specification:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html" class="external-link">scale_x_date</a></span><span class="op">(</span>name <span class="op">=</span> <span class="cn">NULL</span>, date_breaks <span class="op">=</span> <span class="st">"1 month"</span>, date_labels <span class="op">=</span> <span class="st">"%b"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.ticks.length.x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="st">"cm"</span><span class="op">)</span>, axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>vjust <span class="op">=</span> <span class="fl">7</span>, hjust <span class="op">=</span> <span class="op">-</span><span class="fl">0.2</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="covidHubUtils-overview_files/figure-html/unnamed-chunk-7-1.png" width="960"></p>
</div>
<div class="section level3">
<h3 id="versioned-forecasts">Versioned forecasts<a class="anchor" aria-label="anchor" href="#versioned-forecasts"></a>
</h3>
<p><code><a href="../reference/load_forecasts.html">load_forecasts()</a></code> could also load previous versions of
forecasts from Zoltar by using <code>as_of</code> parameter. This
parameter accepts a date in YYYY-MM-DD format to load forecasts
submitted as of this date. It defaults to <code>NULL</code> to load the
latest version. It is useful to compare the changes implemented in the
forecasts.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load forecasts that were submitted in a time window from zoltar</span></span>
<span><span class="va">previous_forecasts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_forecasts.html">load_forecasts</a></span><span class="op">(</span></span>
<span>  models <span class="op">=</span> <span class="st">"Columbia_UNC-SurvCon"</span>,</span>
<span>  dates <span class="op">=</span> <span class="st">"2021-01-03"</span>,</span>
<span>  source <span class="op">=</span> <span class="st">"zoltar"</span>,</span>
<span>  as_of <span class="op">=</span> <span class="st">"2021-01-04"</span>,</span>
<span>  targets <span class="op">=</span> <span class="va">inc_death_targets</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  location <span class="op">=</span> <span class="st">"US"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">new_forecasts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_forecasts.html">load_forecasts</a></span><span class="op">(</span></span>
<span>  models <span class="op">=</span> <span class="st">"Columbia_UNC-SurvCon"</span>,</span>
<span>  dates <span class="op">=</span> <span class="st">"2021-01-03"</span>,</span>
<span>  source <span class="op">=</span> <span class="st">"zoltar"</span>,</span>
<span>  targets <span class="op">=</span> <span class="va">inc_death_targets</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  location <span class="op">=</span> <span class="st">"US"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The data frame and the plot below shows the difference between these
two versions of forecasts.</p>
<div id="htmlwidget-9f826a902ef3e15ed5c2" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-9f826a902ef3e15ed5c2">{"x":{"filter":"none","vertical":false,"extensions":["FixedColumns"],"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96"],["Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon","Columbia_UNC-SurvCon"],["2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03","2021-01-03"],["US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US"],["1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk"],["inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death"],["2021-01-09","2021-01-09","2021-01-09","2021-01-09","2021-01-09","2021-01-09","2021-01-09","2021-01-09","2021-01-09","2021-01-09","2021-01-09","2021-01-09","2021-01-09","2021-01-09","2021-01-09","2021-01-09","2021-01-09","2021-01-09","2021-01-09","2021-01-09","2021-01-09","2021-01-09","2021-01-09","2021-01-09","2021-01-16","2021-01-16","2021-01-16","2021-01-16","2021-01-16","2021-01-16","2021-01-16","2021-01-16","2021-01-16","2021-01-16","2021-01-16","2021-01-16","2021-01-16","2021-01-16","2021-01-16","2021-01-16","2021-01-16","2021-01-16","2021-01-16","2021-01-16","2021-01-16","2021-01-16","2021-01-16","2021-01-16","2021-01-23","2021-01-23","2021-01-23","2021-01-23","2021-01-23","2021-01-23","2021-01-23","2021-01-23","2021-01-23","2021-01-23","2021-01-23","2021-01-23","2021-01-23","2021-01-23","2021-01-23","2021-01-23","2021-01-23","2021-01-23","2021-01-23","2021-01-23","2021-01-23","2021-01-23","2021-01-23","2021-01-23","2021-01-30","2021-01-30","2021-01-30","2021-01-30","2021-01-30","2021-01-30","2021-01-30","2021-01-30","2021-01-30","2021-01-30","2021-01-30","2021-01-30","2021-01-30","2021-01-30","2021-01-30","2021-01-30","2021-01-30","2021-01-30","2021-01-30","2021-01-30","2021-01-30","2021-01-30","2021-01-30","2021-01-30"],["point","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","point","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","point","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","point","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile"],[null,0.01,0.025,0.05,0.1,0.15,0.2,0.25,0.3,0.35,0.4,0.45,0.5,0.55,0.6,0.65,0.7,0.75,0.8,0.85,0.9,0.95,0.975,0.99,null,0.01,0.025,0.05,0.1,0.15,0.2,0.25,0.3,0.35,0.4,0.45,0.5,0.55,0.6,0.65,0.7,0.75,0.8,0.85,0.9,0.95,0.975,0.99,null,0.01,0.025,0.05,0.1,0.15,0.2,0.25,0.3,0.35,0.4,0.45,0.5,0.55,0.6,0.65,0.7,0.75,0.8,0.85,0.9,0.95,0.975,0.99,null,0.01,0.025,0.05,0.1,0.15,0.2,0.25,0.3,0.35,0.4,0.45,0.5,0.55,0.6,0.65,0.7,0.75,0.8,0.85,0.9,0.95,0.975,0.99],["United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States"],[332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137],["state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state"],["us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us"],["US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US"],["United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States"],[247,88276,93730,95221,98620,100933,102747,104790,107276,109064,109883,112164,113940,115462,117071,118501,120007,121568,124806,127766,131727,135690,144920,149831,220,87374,92813,94308,97601,100030,101870,103876,106436,108062,108953,111325,113196,114565,116326,117876,119291,120943,124108,126924,131051,135196,144454,149496,184,88276,93730,95221,98620,100933,102747,104790,107276,109064,109883,112164,113940,115462,117071,118501,120007,121568,124806,127766,131727,135690,144920,149831,148,87374,92813,94308,97601,100030,101870,103876,106436,108062,108953,111325,113196,114565,116326,117876,119291,120943,124108,126924,131051,135196,144454,149496],[18738,15789,16150,16701,17021,17369,17550,17754,17920,18153,18368,18468,18627,18784,18900,19095,19220,19418,19777,20300,20530,21038,21503,21865,18129,15025,15549,15873,16209,16574,16810,17100,17318,17470,17704,17909,18059,18219,18357,18489,18689,18946,19407,19839,20174,20677,21154,21890,17290,13747,14522,14795,15258,15546,15819,16126,16361,16621,16810,17054,17272,17445,17617,17814,18009,18254,18748,19199,19598,20285,21137,21652,16338,12549,13340,13616,14072,14435,14725,15009,15372,15622,15772,16114,16369,16590,16833,17048,17252,17460,17924,18375,18943,19523,20833,21537]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>model<\/th>\n      <th>forecast_date<\/th>\n      <th>location<\/th>\n      <th>horizon<\/th>\n      <th>temporal_resolution<\/th>\n      <th>target_variable<\/th>\n      <th>target_end_date<\/th>\n      <th>type<\/th>\n      <th>quantile<\/th>\n      <th>location_name<\/th>\n      <th>population<\/th>\n      <th>geo_type<\/th>\n      <th>geo_value<\/th>\n      <th>abbreviation<\/th>\n      <th>full_location_name<\/th>\n      <th>previous_value<\/th>\n      <th>new_value<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"t","scrollX":true,"fixedColumns":{"leftColumns":2},"columnDefs":[{"className":"dt-right","targets":[9,11,16,17]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"rowCallback":"function(row, data, displayNum, displayIndex, dataIndex) {\nvar value=data[16]; $(this.api().cell(row, 16).node()).css({'background-color':'lightgrey'});\nvar value=data[17]; $(this.api().cell(row, 17).node()).css({'background-color':'lightgrey'});\n}"}},"evals":["options.rowCallback"],"jsHooks":[]}</script><div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p_as_of</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_forecasts.html">plot_forecasts</a></span><span class="op">(</span></span>
<span>  forecast_data <span class="op">=</span> <span class="va">previous_forecasts</span>,</span>
<span>  truth_source <span class="op">=</span> <span class="st">"JHU"</span>,</span>
<span>  target_variable <span class="op">=</span> <span class="st">"inc death"</span>,</span>
<span>  intervals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.5</span>, <span class="fl">.8</span>, <span class="fl">.95</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="covidHubUtils-overview_files/figure-html/unnamed-chunk-10-1.png" width="960"></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p_correct</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_forecasts.html">plot_forecasts</a></span><span class="op">(</span></span>
<span>  forecast_data <span class="op">=</span> <span class="va">new_forecasts</span>,</span>
<span>  truth_source <span class="op">=</span> <span class="st">"JHU"</span>,</span>
<span>  target_variable <span class="op">=</span> <span class="st">"inc death"</span>,</span>
<span>  intervals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.5</span>, <span class="fl">.8</span>, <span class="fl">.95</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="covidHubUtils-overview_files/figure-html/unnamed-chunk-10-2.png" width="960"></p>
</div>
<div class="section level3">
<h3 id="query-the-us-or-the-european-forecast-hubs">Query the US or the European Forecast Hubs<a class="anchor" aria-label="anchor" href="#query-the-us-or-the-european-forecast-hubs"></a>
</h3>
<p>The <code>hub</code> parameter is useful to load forecasts submitted
to a particular forecast hub. This parameter takes a character vector,
where the first element indicates the hub to load forecasts from.
Currently, it supports “US” and “ECDC”.</p>
<p>Here is an example for loading forecasts from the European Forecast
Hub (ECDC).</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load forecasts that were submitted in a time window from zoltar</span></span>
<span><span class="va">inc_case_targets</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="st">"wk ahead inc case"</span><span class="op">)</span></span>
<span><span class="va">forecasts_ECDC</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_forecasts.html">load_forecasts</a></span><span class="op">(</span></span>
<span>  models <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ILM-EKF"</span><span class="op">)</span>,</span>
<span>  hub <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ECDC"</span>, <span class="st">"US"</span><span class="op">)</span>,</span>
<span>  dates <span class="op">=</span> <span class="st">"2021-03-08"</span>,</span>
<span>  date_window_size <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  locations <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"GB"</span><span class="op">)</span>,</span>
<span>  targets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="st">"wk ahead inc death"</span><span class="op">)</span>,</span>
<span>  source <span class="op">=</span> <span class="st">"zoltar"</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="fu">datatable</span><span class="op">(</span><span class="va">forecasts_ECDC</span>,</span>
<span>  extensions <span class="op">=</span> <span class="st">"FixedColumns"</span>,</span>
<span>  options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    dom <span class="op">=</span> <span class="st">"t"</span>, scrollX <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    fixedColumns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>leftColumns <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-de5f855736afd4824e3a" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-de5f855736afd4824e3a">{"x":{"filter":"none","vertical":false,"extensions":["FixedColumns"],"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96"],["ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF"],["2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08","2021-03-08"],["GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB","GB"],["1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"],["wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk"],["inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death"],["2021-03-13","2021-03-13","2021-03-13","2021-03-13","2021-03-13","2021-03-13","2021-03-13","2021-03-13","2021-03-13","2021-03-13","2021-03-13","2021-03-13","2021-03-13","2021-03-13","2021-03-13","2021-03-13","2021-03-13","2021-03-13","2021-03-13","2021-03-13","2021-03-13","2021-03-13","2021-03-13","2021-03-13","2021-03-20","2021-03-20","2021-03-20","2021-03-20","2021-03-20","2021-03-20","2021-03-20","2021-03-20","2021-03-20","2021-03-20","2021-03-20","2021-03-20","2021-03-20","2021-03-20","2021-03-20","2021-03-20","2021-03-20","2021-03-20","2021-03-20","2021-03-20","2021-03-20","2021-03-20","2021-03-20","2021-03-20","2021-03-27","2021-03-27","2021-03-27","2021-03-27","2021-03-27","2021-03-27","2021-03-27","2021-03-27","2021-03-27","2021-03-27","2021-03-27","2021-03-27","2021-03-27","2021-03-27","2021-03-27","2021-03-27","2021-03-27","2021-03-27","2021-03-27","2021-03-27","2021-03-27","2021-03-27","2021-03-27","2021-03-27","2021-04-03","2021-04-03","2021-04-03","2021-04-03","2021-04-03","2021-04-03","2021-04-03","2021-04-03","2021-04-03","2021-04-03","2021-04-03","2021-04-03","2021-04-03","2021-04-03","2021-04-03","2021-04-03","2021-04-03","2021-04-03","2021-04-03","2021-04-03","2021-04-03","2021-04-03","2021-04-03","2021-04-03"],["point","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","point","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","point","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","point","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile","quantile"],[null,0.01,0.025,0.05,0.1,0.15,0.2,0.25,0.3,0.35,0.4,0.45,0.5,0.55,0.6,0.65,0.7,0.75,0.8,0.85,0.9,0.95,0.975,0.99,null,0.01,0.025,0.05,0.1,0.15,0.2,0.25,0.3,0.35,0.4,0.45,0.5,0.55,0.6,0.65,0.7,0.75,0.8,0.85,0.9,0.95,0.975,0.99,null,0.01,0.025,0.05,0.1,0.15,0.2,0.25,0.3,0.35,0.4,0.45,0.5,0.55,0.6,0.65,0.7,0.75,0.8,0.85,0.9,0.95,0.975,0.99,null,0.01,0.025,0.05,0.1,0.15,0.2,0.25,0.3,0.35,0.4,0.45,0.5,0.55,0.6,0.65,0.7,0.75,0.8,0.85,0.9,0.95,0.975,0.99],[1253,574,658,735,840,910,966,1022,1071,1120,1162,1211,1253,1302,1351,1407,1463,1519,1596,1680,1792,1967,2121,2317,917,364,434,497,574,630,679,721,763,805,840,875,917,952,994,1043,1085,1141,1197,1274,1372,1519,1659,1827,644,203,252,294,357,406,448,483,518,546,581,616,644,679,721,756,798,847,903,966,1057,1190,1323,1484,427,77,112,147,189,224,259,287,315,343,371,399,427,455,490,525,567,609,658,721,805,945,1071,1232],["United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom"],[66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273,66022273]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>model<\/th>\n      <th>forecast_date<\/th>\n      <th>location<\/th>\n      <th>horizon<\/th>\n      <th>temporal_resolution<\/th>\n      <th>target_variable<\/th>\n      <th>target_end_date<\/th>\n      <th>type<\/th>\n      <th>quantile<\/th>\n      <th>value<\/th>\n      <th>location_name<\/th>\n      <th>population<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"t","scrollX":true,"fixedColumns":{"leftColumns":2},"columnDefs":[{"className":"dt-right","targets":[9,10,12]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p_ECDC</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_forecasts.html">plot_forecasts</a></span><span class="op">(</span></span>
<span>  forecast_data <span class="op">=</span> <span class="va">forecasts_ECDC</span>,</span>
<span>  truth_source <span class="op">=</span> <span class="st">"JHU"</span>,</span>
<span>  target_variable <span class="op">=</span> <span class="st">"inc death"</span>,</span>
<span>  intervals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.5</span>, <span class="fl">.8</span>, <span class="fl">.95</span><span class="op">)</span>,</span>
<span>  hub <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ECDC"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="covidHubUtils-overview_files/figure-html/unnamed-chunk-11-2.png" width="960"></p>
</div>
<div class="section level3">
<h3 id="plot-multiple-models">Plot multiple models<a class="anchor" aria-label="anchor" href="#plot-multiple-models"></a>
</h3>
<p>Some additional arguments in <code><a href="../reference/plot_forecasts.html">plot_forecasts()</a></code> are
helpful for creating a reasonable plot if <code>forecast_data</code> has
multiple locations, forecast dates or models.</p>
<p>The following code looks at three models’ forecasts of incident
deaths at one time point for one location. Note the use of the
<code>fill_by_model</code> option which allows colors to vary by model
and the <code>facet</code> command which is passed to ggplot.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fdat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_forecasts.html">load_forecasts</a></span><span class="op">(</span></span>
<span>  models <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Karlen-pypm"</span>, <span class="st">"UMass-MechBayes"</span>, <span class="st">"CU-select"</span><span class="op">)</span>,</span>
<span>  dates <span class="op">=</span> <span class="st">"2021-03-08"</span>,</span>
<span>  source <span class="op">=</span> <span class="st">"zoltar"</span>,</span>
<span>  date_window_size <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  locations <span class="op">=</span> <span class="st">"US"</span>,</span>
<span>  types <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"quantile"</span>, <span class="st">"point"</span><span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  targets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="st">"wk ahead inc death"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_forecasts.html">plot_forecasts</a></span><span class="op">(</span><span class="va">fdat</span>,</span>
<span>  target_variable <span class="op">=</span> <span class="st">"inc death"</span>,</span>
<span>  truth_source <span class="op">=</span> <span class="st">"JHU"</span>,</span>
<span>  intervals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.5</span>, <span class="fl">.95</span><span class="op">)</span>,</span>
<span>  facet <span class="op">=</span> <span class="va">.</span> <span class="op">~</span> <span class="va">model</span>,</span>
<span>  fill_by_model <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  plot <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">p</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html" class="external-link">scale_x_date</a></span><span class="op">(</span>name <span class="op">=</span> <span class="cn">NULL</span>, date_breaks <span class="op">=</span> <span class="st">"1 months"</span>, date_labels <span class="op">=</span> <span class="st">"%b"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span>
<span>    axis.ticks.length.x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="st">"cm"</span><span class="op">)</span>,</span>
<span>    axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>vjust <span class="op">=</span> <span class="fl">7</span>, hjust <span class="op">=</span> <span class="op">-</span><span class="fl">0.2</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="covidHubUtils-overview_files/figure-html/unnamed-chunk-12-1.png" width="960"></p>
</div>
<div class="section level3">
<h3 id="plot-multiple-models-and-locations">Plot multiple models and locations<a class="anchor" aria-label="anchor" href="#plot-multiple-models-and-locations"></a>
</h3>
<p>The following code looks at three models’ forecasts of incident
deaths for multiple locations submitted at the same forecast time point.
Note the use of the <code>facet_scales</code> option which is passed to
<code>ggplot</code> and allows the y-axes to be on different scales.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fdat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_forecasts.html">load_forecasts</a></span><span class="op">(</span></span>
<span>  models <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Karlen-pypm"</span>, <span class="st">"UMass-MechBayes"</span>, <span class="st">"CU-select"</span><span class="op">)</span>,</span>
<span>  dates <span class="op">=</span> <span class="st">"2021-03-08"</span>,</span>
<span>  source <span class="op">=</span> <span class="st">"zoltar"</span>,</span>
<span>  date_window_size <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  locations <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"19"</span>, <span class="st">"48"</span>, <span class="st">"46"</span><span class="op">)</span>,</span>
<span>  types <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"quantile"</span>, <span class="st">"point"</span><span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  targets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="st">"wk ahead inc death"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_forecasts.html">plot_forecasts</a></span><span class="op">(</span><span class="va">fdat</span>,</span>
<span>  target_variable <span class="op">=</span> <span class="st">"inc death"</span>,</span>
<span>  intervals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.5</span>, <span class="fl">.95</span><span class="op">)</span>,</span>
<span>  truth_source <span class="op">=</span> <span class="st">"JHU"</span>,</span>
<span>  facet <span class="op">=</span> <span class="va">location</span> <span class="op">~</span> <span class="va">model</span>,</span>
<span>  facet_scales <span class="op">=</span> <span class="st">"free_y"</span>,</span>
<span>  fill_by_model <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  plot <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">p</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html" class="external-link">scale_x_date</a></span><span class="op">(</span>name <span class="op">=</span> <span class="cn">NULL</span>, date_breaks <span class="op">=</span> <span class="st">"1 months"</span>, date_labels <span class="op">=</span> <span class="st">"%b"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span>
<span>    axis.ticks.length.x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="st">"cm"</span><span class="op">)</span>,</span>
<span>    axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>vjust <span class="op">=</span> <span class="fl">7</span>, hjust <span class="op">=</span> <span class="op">-</span><span class="fl">0.2</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="covidHubUtils-overview_files/figure-html/unnamed-chunk-13-1.png" width="960"></p>
</div>
<div class="section level3">
<h3 id="plot-multiple-forecast-dates">Plot multiple forecast dates<a class="anchor" aria-label="anchor" href="#plot-multiple-forecast-dates"></a>
</h3>
<p>The following code looks at two models’ forecasts of incident deaths
for the same location at three different forecast time points.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fdat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_forecasts.html">load_forecasts</a></span><span class="op">(</span></span>
<span>  models <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Karlen-pypm"</span>, <span class="st">"UMass-MechBayes"</span><span class="op">)</span>,</span>
<span>  dates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.Date.html" class="external-link">seq.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2020-12-13"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2021-03-14"</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">"28 days"</span><span class="op">)</span>,</span>
<span>  locations <span class="op">=</span> <span class="st">"US"</span>,</span>
<span>  types <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"quantile"</span>, <span class="st">"point"</span><span class="op">)</span>,</span>
<span>  targets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="st">"wk ahead inc death"</span><span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_forecasts.html">plot_forecasts</a></span><span class="op">(</span><span class="va">fdat</span>,</span>
<span>  target_variable <span class="op">=</span> <span class="st">"inc death"</span>,</span>
<span>  truth_source <span class="op">=</span> <span class="st">"JHU"</span>,</span>
<span>  intervals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.5</span>, <span class="fl">.95</span><span class="op">)</span>,</span>
<span>  facet <span class="op">=</span> <span class="va">.</span> <span class="op">~</span> <span class="va">model</span>,</span>
<span>  fill_by_model <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  plot <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html" class="external-link">scale_x_date</a></span><span class="op">(</span>name <span class="op">=</span> <span class="cn">NULL</span>, date_breaks <span class="op">=</span> <span class="st">"1 months"</span>, date_labels <span class="op">=</span> <span class="st">"%b"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span>
<span>    axis.ticks.length.x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="st">"cm"</span><span class="op">)</span>,</span>
<span>    axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>vjust <span class="op">=</span> <span class="fl">7</span>, hjust <span class="op">=</span> <span class="op">-</span><span class="fl">0.2</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="covidHubUtils-overview_files/figure-html/unnamed-chunk-14-1.png" width="960"></p>
</div>
</div>
<div class="section level2">
<h2 id="working-with-truth-data">Working with truth data<a class="anchor" aria-label="anchor" href="#working-with-truth-data"></a>
</h2>
<p>By default <code><a href="../reference/plot_forecasts.html">plot_forecasts()</a></code> uses JHU CSSE data as the
“Observed Data” in the above plots. However, users can specify custom
“ground truth” data that either they provide themselves or that is
loaded in from the package.</p>
<p>Here is an example of a call to <code><a href="../reference/plot_forecasts.html">plot_forecasts()</a></code> that
simply specifies an alternate truth source, which must be one of “JHU”,
“HealthData” or “NYTimes”.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_forecasts.html">plot_forecasts</a></span><span class="op">(</span></span>
<span>  forecast_data <span class="op">=</span> <span class="va">forecasts_case</span>,</span>
<span>  target_variable <span class="op">=</span> <span class="st">"inc case"</span>,</span>
<span>  locations <span class="op">=</span> <span class="st">"US"</span>,</span>
<span>  truth_source <span class="op">=</span> <span class="st">"NYTimes"</span>,</span>
<span>  intervals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.5</span>, <span class="fl">.8</span>, <span class="fl">.95</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="covidHubUtils-overview_files/figure-html/unnamed-chunk-15-1.png" width="960"></p>
<p>Alternatively, truth data can be loaded in from one of those sources
independently and stored in your active R session and passed to the
<code><a href="../reference/plot_forecasts.html">plot_forecasts()</a></code> function.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">truth_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_truth.html">load_truth</a></span><span class="op">(</span></span>
<span>  truth_source <span class="op">=</span> <span class="st">"JHU"</span>,</span>
<span>  target_variable <span class="op">=</span> <span class="st">"inc case"</span>,</span>
<span>  locations <span class="op">=</span> <span class="st">"US"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Truth data comes in the following tabular format.</p>
<div id="htmlwidget-0d581b141de3f96670ba" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-0d581b141de3f96670ba">{"x":{"filter":"none","vertical":false,"extensions":["FixedColumns"],"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147"],["Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)","Observed Data (JHU)"],["US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US"],["2020-01-25","2020-02-01","2020-02-08","2020-02-15","2020-02-22","2020-02-29","2020-03-07","2020-03-14","2020-03-21","2020-03-28","2020-04-04","2020-04-11","2020-04-18","2020-04-25","2020-05-02","2020-05-09","2020-05-16","2020-05-23","2020-05-30","2020-06-06","2020-06-13","2020-06-20","2020-06-27","2020-07-04","2020-07-11","2020-07-18","2020-07-25","2020-08-01","2020-08-08","2020-08-15","2020-08-22","2020-08-29","2020-09-05","2020-09-12","2020-09-19","2020-09-26","2020-10-03","2020-10-10","2020-10-17","2020-10-24","2020-10-31","2020-11-07","2020-11-14","2020-11-21","2020-11-28","2020-12-05","2020-12-12","2020-12-19","2020-12-26","2021-01-02","2021-01-09","2021-01-16","2021-01-23","2021-01-30","2021-02-06","2021-02-13","2021-02-20","2021-02-27","2021-03-06","2021-03-13","2021-03-20","2021-03-27","2021-04-03","2021-04-10","2021-04-17","2021-04-24","2021-05-01","2021-05-08","2021-05-15","2021-05-22","2021-05-29","2021-06-05","2021-06-12","2021-06-19","2021-06-26","2021-07-03","2021-07-10","2021-07-17","2021-07-24","2021-07-31","2021-08-07","2021-08-14","2021-08-21","2021-08-28","2021-09-04","2021-09-11","2021-09-18","2021-09-25","2021-10-02","2021-10-09","2021-10-16","2021-10-23","2021-10-30","2021-11-06","2021-11-13","2021-11-20","2021-11-27","2021-12-04","2021-12-11","2021-12-18","2021-12-25","2022-01-01","2022-01-08","2022-01-15","2022-01-22","2022-01-29","2022-02-05","2022-02-12","2022-02-19","2022-02-26","2022-03-05","2022-03-12","2022-03-19","2022-03-26","2022-04-02","2022-04-09","2022-04-16","2022-04-23","2022-04-30","2022-05-07","2022-05-14","2022-05-21","2022-05-28","2022-06-04","2022-06-11","2022-06-18","2022-06-25","2022-07-02","2022-07-09","2022-07-16","2022-07-23","2022-07-30","2022-08-06","2022-08-13","2022-08-20","2022-08-27","2022-09-03","2022-09-10","2022-09-17","2022-09-24","2022-10-01","2022-10-08","2022-10-15","2022-10-22","2022-10-29","2022-11-05","2022-11-12"],["inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case","inc case"],[0,6,4,2,2,10,391,2535,23104,101361,196536,221345,198107,206106,192943,174948,156093,153214,145399,150060,148830,182865,260286,336568,404457,453372,462067,435189,388822,391765,301775,290514,286817,244727,290249,292778,302121,334461,388298,484991,571944,777002,1028752,1205337,1181090,1368452,1512985,1553067,1365370,1500155,1733392,1561817,1222840,1056679,851670,659841,473826,482984,423987,380191,386452,431749,459906,479870,478570,413850,349175,293590,236739,180815,145561,101901,98938,80716,86697,91049,134031,223086,363945,554047,778756,911719,1047599,1088201,1153300,1041422,1021824,834500,759455,667135,589534,512257,506207,516288,569288,647440,505907,848695,832160,911864,1372917,2875072,4974850,5648272,5053505,3748265,2107362,1260855,727760,464582,337122,237872,215420,210509,198784,243934,234099,343364,380249,519620,578442,811802,714560,772981,734901,731139,707592,815309,732904,946248,862070,937852,782972,807706,599477,662559,551220,495798,410035,402998,325825,300169,250012,258750,260872,284263,253747],["United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States"],[332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137,332875137],["state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state","state"],["us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us","us"],["US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US"],["United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>model<\/th>\n      <th>location<\/th>\n      <th>target_end_date<\/th>\n      <th>target_variable<\/th>\n      <th>value<\/th>\n      <th>location_name<\/th>\n      <th>population<\/th>\n      <th>geo_type<\/th>\n      <th>geo_value<\/th>\n      <th>abbreviation<\/th>\n      <th>full_location_name<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"t","scrollX":true,"fixedColumns":{"leftColumns":3},"columnDefs":[{"className":"dt-right","targets":[5,7]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><p>And can be used in conjunction with a call to
<code><a href="../reference/plot_forecasts.html">plot_forecasts()</a></code></p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_forecasts.html">plot_forecasts</a></span><span class="op">(</span></span>
<span>  forecast_data <span class="op">=</span> <span class="va">forecasts_case</span>,</span>
<span>  target_variable <span class="op">=</span> <span class="st">"inc case"</span>,</span>
<span>  truth_data <span class="op">=</span> <span class="va">truth_data</span>,</span>
<span>  truth_source <span class="op">=</span> <span class="st">"JHU"</span>,</span>
<span>  intervals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.5</span>, <span class="fl">.8</span>, <span class="fl">.95</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="covidHubUtils-overview_files/figure-html/unnamed-chunk-18-1.png" width="960"></p>
</div>
<div class="section level2">
<h2 id="working-with-scored-forecasts">Working with scored forecasts<a class="anchor" aria-label="anchor" href="#working-with-scored-forecasts"></a>
</h2>
<p>In addition to querying forecasts and truth data,
<code>covidHubUtils</code> has the capability to evaluate the forecasts
based on metrics including the prediction interval coverage at any
provided quantiles, the absolute error based on a median estimate, the
weighted interval score (WIS) of the forecast, and a component-wise
breakdown of WIS into dispersion, overprediction and
underprediction.</p>
<p>These scores could be used to compare the accuracy and precision of
forecasts across models, locations, horizons, and submission weeks. You
can access the <a href="https://www.medrxiv.org/content/10.1101/2021.02.03.21250974v1" class="external-link">evaluation
paper</a> to read an in-depth explanation about the methodologies.</p>
<p>To find the most recent weekly forecast evaluation summary, please
visit the <a href="https://covid19forecasthub.org/eval-reports/" class="external-link">evaluation reports
page</a> and <a href="https://delphi.cmu.edu/forecast-eval/" class="external-link">the
Forecast Evaluation Dashboard</a> built by the CMU Delphi team and the
COVID-19 Forecast Hub.</p>
<div class="section level3">
<h3 id="score-forecasts">Score forecasts<a class="anchor" aria-label="anchor" href="#score-forecasts"></a>
</h3>
<p>The inputs to the <code>scored_forecasts()</code> include a
<code>forecasts</code> data frame created by
<code><a href="../reference/load_forecasts.html">load_forecasts()</a></code> and a <code>truth</code> data frame
created by <code><a href="../reference/load_truth.html">load_truth()</a></code>.</p>
<p>The <code>scoringutils</code> package provides a collection of
metrics and proper scoring rules that make it simple to score forecasts
against the true observed values. Please install and load the most
up-to-date development version of <code>scoringutils</code> from
GitHub:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"epiforecasts/scoringutils"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://epiforecasts.io/scoringutils/" class="external-link">scoringutils</a></span><span class="op">)</span></span></code></pre></div>
<p>The following code scores forecasts by the corresponding truth data
loaded earlier in this vignette in long format. This is the example for
the US Forecast Hub:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">inc_case_targets</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="st">"wk ahead inc case"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">truth_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_truth.html">load_truth</a></span><span class="op">(</span></span>
<span>  truth_source <span class="op">=</span> <span class="st">"JHU"</span>,</span>
<span>  target_variable <span class="op">=</span> <span class="st">"inc death"</span>,</span>
<span>  locations <span class="op">=</span> <span class="st">"US"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">forecasts_multiple</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_forecasts.html">load_forecasts</a></span><span class="op">(</span></span>
<span>  models <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"COVIDhub-baseline"</span>, <span class="st">"COVIDhub-ensemble"</span><span class="op">)</span>,</span>
<span>  dates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2020-12-15"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">35</span>, <span class="fl">7</span><span class="op">)</span>,</span>
<span>  <span class="co"># for each date in `dates`, also look at the day before it</span></span>
<span>  date_window_size <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  locations <span class="op">=</span> <span class="st">"US"</span>,</span>
<span>  types <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"point"</span>, <span class="st">"quantile"</span><span class="op">)</span>,</span>
<span>  targets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="st">"wk ahead inc death"</span><span class="op">)</span>,</span>
<span>  source <span class="op">=</span> <span class="st">"zoltar"</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  as_of <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  hub <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"US"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">scores</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/score_forecasts.html">score_forecasts</a></span><span class="op">(</span></span>
<span>  forecasts <span class="op">=</span> <span class="va">forecasts_multiple</span>,</span>
<span>  return_format <span class="op">=</span> <span class="st">"wide"</span>,</span>
<span>  truth <span class="op">=</span> <span class="va">truth_data</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">datatable</span><span class="op">(</span><span class="va">scores</span>,</span>
<span>  extensions <span class="op">=</span> <span class="st">"FixedColumns"</span>,</span>
<span>  options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    dom <span class="op">=</span> <span class="st">"t"</span>, scrollX <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    fixedColumns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>leftColumns <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-3f909dc80b1695b9191a" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-3f909dc80b1695b9191a">{"x":{"filter":"none","vertical":false,"extensions":["FixedColumns"],"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48"],["COVIDhub-baseline","COVIDhub-baseline","COVIDhub-baseline","COVIDhub-baseline","COVIDhub-baseline","COVIDhub-baseline","COVIDhub-baseline","COVIDhub-baseline","COVIDhub-baseline","COVIDhub-baseline","COVIDhub-baseline","COVIDhub-baseline","COVIDhub-baseline","COVIDhub-baseline","COVIDhub-baseline","COVIDhub-baseline","COVIDhub-baseline","COVIDhub-baseline","COVIDhub-baseline","COVIDhub-baseline","COVIDhub-baseline","COVIDhub-baseline","COVIDhub-baseline","COVIDhub-baseline","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble","COVIDhub-ensemble"],["US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US","US"],["1","2","3","4","1","2","3","4","1","2","3","4","1","2","3","4","1","2","3","4","1","2","3","4","1","2","3","4","1","2","3","4","1","2","3","4","1","2","3","4","1","2","3","4","1","2","3","4"],["wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk","wk"],["inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death","inc death"],["2020-12-14","2020-12-14","2020-12-14","2020-12-14","2020-12-21","2020-12-21","2020-12-21","2020-12-21","2020-12-28","2020-12-28","2020-12-28","2020-12-28","2021-01-04","2021-01-04","2021-01-04","2021-01-04","2021-01-11","2021-01-11","2021-01-11","2021-01-11","2021-01-18","2021-01-18","2021-01-18","2021-01-18","2020-12-14","2020-12-14","2020-12-14","2020-12-14","2020-12-21","2020-12-21","2020-12-21","2020-12-21","2020-12-28","2020-12-28","2020-12-28","2020-12-28","2021-01-04","2021-01-04","2021-01-04","2021-01-04","2021-01-11","2021-01-11","2021-01-11","2021-01-11","2021-01-18","2021-01-18","2021-01-18","2021-01-18"],["2020-12-19","2020-12-26","2021-01-02","2021-01-09","2020-12-26","2021-01-02","2021-01-09","2021-01-16","2021-01-02","2021-01-09","2021-01-16","2021-01-23","2021-01-09","2021-01-16","2021-01-23","2021-01-30","2021-01-16","2021-01-23","2021-01-30","2021-02-06","2021-01-23","2021-01-30","2021-02-06","2021-02-13","2020-12-19","2020-12-26","2021-01-02","2021-01-09","2020-12-26","2021-01-02","2021-01-09","2021-01-16","2021-01-02","2021-01-09","2021-01-16","2021-01-23","2021-01-09","2021-01-16","2021-01-23","2021-01-30","2021-01-16","2021-01-23","2021-01-30","2021-02-06","2021-01-23","2021-01-30","2021-02-06","2021-02-13"],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1],[0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1],[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1],[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1],[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1],[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1],[0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,1,1,1,1,1,1,0,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1],[0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1],[0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1],[0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1],[0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1],[0,1,1,0,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,0,0,1,1,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,0,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0],[0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,1,0,0,1,0,1,0,0,0,0,0,0,0,0,1,1,1,0,1,0,0],[0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,0,0,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0],[0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,0,0,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0],[0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,1,1,0,0,0,1,1,0,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0],[0,1,1,0,0,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,1,1,0,1,0,1,1,0,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0],[0,1,1,0,0,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,0,1,1,1,1,0,0,1,0,0,1,1,1,1,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,0,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1],[2327,196,2104,5610,1819,481,3987,5193,2986,6492,7698,6008,3965,5171,3481,3601,1230,460,340,835,1577,1457,1952,5782,1619,2951,1691,634,3071,1872,924,1964,1203,4236,5536,4182,4301,5709,3828,3942,2401,124,243,835,1259,1303,1886,4957],[12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12],[true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true],[1500.97919513238,387.588028364673,1164.69957034498,3473.72587631831,1110.32927391304,442.111794649187,2403.98888560358,3168.73755930295,2007.02283043478,4660.17378220112,5467.81109974375,3761.169210547,2783.07073478261,3473.64556484113,1994.55759672176,2007.73129281356,712.378826086957,483.740335374271,597.603043969091,778.574883868451,909.622353523534,819.871696318455,1080.54333422434,3517.56774964971,867.982608695652,1636.05304347826,847.014782608696,831.896086956522,1660.60260869565,971.936521739131,676.431304347826,950.318260869565,695.90652173913,2231.28304347826,3241.49391304348,2328.69434782609,2908.41608695652,3896.32869565217,2067.5,2176.97782608696,1269.35826086957,514.004347826087,680.608260869565,855.439565217391,701.57,801.569565217391,1097.39434782609,2972.48260869565],[216.13096104135,377.965899273821,504.317620047225,613.184248554199,219.890143478261,386.099992009422,508.074357110463,615.882820103396,230.714134782609,400.326433640679,528.889184415911,638.46246213169,241.114213043478,412.092865792391,545.004579365518,655.27556495193,249.226652173913,437.696917114001,578.595331413708,695.385941196416,252.189064494995,438.959911244089,574.760786833649,689.346356392301,347.591304347826,427.748695652174,540.101739130435,776.330869565217,463.254782608696,506.806086956522,554.866086956522,736.84,498.123913043478,682.848260869565,626.798260869565,615.129130434783,312.111739130435,410.980869565217,605.934782608696,622.456086956522,387.227826086956,508.613043478261,670.043043478261,746.091739130435,521.52652173913,673.613043478261,752.176956521739,774.526086956522],[0,9.62212909085223,0,0,890.439130434783,0,0,0,0,0,0,0,0,0,0,0,0,46.0434182602697,19.0077125553827,83.188942672035,657.433289028539,380.911785074365,505.782547390687,2828.22139325741,0,1208.30434782609,306.913043478261,0,1197.34782608696,465.130434782609,0,0,0,0,0,0,0,0,0,0,0,0,10.5652173913043,109.347826086957,180.04347826087,127.95652173913,345.217391304348,2197.95652173913],[1284.84823409103,0,660.381950297756,2860.54162776411,0,56.0118026397651,1895.91452849311,2552.85473919956,1776.30869565217,4259.84734856044,4938.92191532784,3122.70674841531,2541.95652173913,3061.55269904874,1449.55301735624,1352.45572786163,463.152173913043,0,0,0,0,0,0,0,520.391304347826,0,0,55.5652173913044,0,0,121.565217391304,213.478260869565,197.782608695652,1548.4347826087,2614.69565217391,1713.5652173913,2596.30434782609,3485.34782608696,1461.5652173913,1554.52173913043,882.130434782609,5.39130434782609,0,0,0,0,0,0],[18959,16436,18736,22242,16436,18736,22242,23448,18736,22242,23448,21758,22242,23448,21758,21878,23448,21758,21878,21383,21758,21878,21383,17553,18959,16436,18736,22242,16436,18736,22242,23448,18736,22242,23448,21758,22242,23448,21758,21878,23448,21758,21878,21383,21758,21878,21383,17553]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>model<\/th>\n      <th>location<\/th>\n      <th>horizon<\/th>\n      <th>temporal_resolution<\/th>\n      <th>target_variable<\/th>\n      <th>forecast_date<\/th>\n      <th>target_end_date<\/th>\n      <th>quantile_coverage_0.01<\/th>\n      <th>quantile_coverage_0.025<\/th>\n      <th>quantile_coverage_0.05<\/th>\n      <th>quantile_coverage_0.1<\/th>\n      <th>quantile_coverage_0.15<\/th>\n      <th>quantile_coverage_0.2<\/th>\n      <th>quantile_coverage_0.25<\/th>\n      <th>quantile_coverage_0.3<\/th>\n      <th>quantile_coverage_0.35<\/th>\n      <th>quantile_coverage_0.4<\/th>\n      <th>quantile_coverage_0.45<\/th>\n      <th>quantile_coverage_0.5<\/th>\n      <th>quantile_coverage_0.55<\/th>\n      <th>quantile_coverage_0.6<\/th>\n      <th>quantile_coverage_0.65<\/th>\n      <th>quantile_coverage_0.7<\/th>\n      <th>quantile_coverage_0.75<\/th>\n      <th>quantile_coverage_0.8<\/th>\n      <th>quantile_coverage_0.85<\/th>\n      <th>quantile_coverage_0.9<\/th>\n      <th>quantile_coverage_0.95<\/th>\n      <th>quantile_coverage_0.975<\/th>\n      <th>quantile_coverage_0.99<\/th>\n      <th>coverage_10<\/th>\n      <th>coverage_20<\/th>\n      <th>coverage_30<\/th>\n      <th>coverage_40<\/th>\n      <th>coverage_50<\/th>\n      <th>coverage_60<\/th>\n      <th>coverage_70<\/th>\n      <th>coverage_80<\/th>\n      <th>coverage_90<\/th>\n      <th>coverage_95<\/th>\n      <th>coverage_98<\/th>\n      <th>abs_error<\/th>\n      <th>n_interval_scores<\/th>\n      <th>exists_interval_score_0<\/th>\n      <th>wis<\/th>\n      <th>dispersion<\/th>\n      <th>overprediction<\/th>\n      <th>underprediction<\/th>\n      <th>true_value<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"t","scrollX":true,"fixedColumns":{"leftColumns":2},"columnDefs":[{"className":"dt-right","targets":[8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,45,46,47,48,49]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><p>This is the example for European Forecast Hub:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">truth</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_truth.html">load_truth</a></span><span class="op">(</span><span class="st">"JHU"</span>,</span>
<span>  hub <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ECDC"</span>, <span class="st">"US"</span><span class="op">)</span>,</span>
<span>  target_variable <span class="op">=</span> <span class="st">"inc death"</span>,</span>
<span>  locations <span class="op">=</span> <span class="st">"GB"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">scores_ECDC</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/score_forecasts.html">score_forecasts</a></span><span class="op">(</span></span>
<span>  forecasts <span class="op">=</span> <span class="va">forecasts_ECDC</span>,</span>
<span>  return_format <span class="op">=</span> <span class="st">"wide"</span>,</span>
<span>  truth <span class="op">=</span> <span class="va">truth</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">datatable</span><span class="op">(</span><span class="va">scores_ECDC</span>,</span>
<span>  extensions <span class="op">=</span> <span class="st">"FixedColumns"</span>,</span>
<span>  options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    dom <span class="op">=</span> <span class="st">"t"</span>, scrollX <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    fixedColumns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>leftColumns <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div id="htmlwidget-9f3bb42b3de37472452a" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-9f3bb42b3de37472452a">{"x":{"filter":"none","vertical":false,"extensions":["FixedColumns"],"data":[["1","2","3","4"],["ILM-EKF","ILM-EKF","ILM-EKF","ILM-EKF"],["GB","GB","GB","GB"],["1","2","3","4"],["wk","wk","wk","wk"],["inc death","inc death","inc death","inc death"],["2021-03-08","2021-03-08","2021-03-08","2021-03-08"],["2021-03-13","2021-03-20","2021-03-27","2021-04-03"],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,1,0,0],[1,1,0,0],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[0,0,1,1],[1,0,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[69,97,26,22],[12,12,12,12],[true,true,true,true],[84.5786956521739,76.6091304347826,58.7160869565217,51.7369565217391],[79.2308695652174,65.87,57.585652173913,50.7804347826087],[5.34782608695652,10.7391304347826,1.1304347826087,0.956521739130435],[0,0,0,0],[1184,820,618,405]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>model<\/th>\n      <th>location<\/th>\n      <th>horizon<\/th>\n      <th>temporal_resolution<\/th>\n      <th>target_variable<\/th>\n      <th>forecast_date<\/th>\n      <th>target_end_date<\/th>\n      <th>quantile_coverage_0.01<\/th>\n      <th>quantile_coverage_0.025<\/th>\n      <th>quantile_coverage_0.05<\/th>\n      <th>quantile_coverage_0.1<\/th>\n      <th>quantile_coverage_0.15<\/th>\n      <th>quantile_coverage_0.2<\/th>\n      <th>quantile_coverage_0.25<\/th>\n      <th>quantile_coverage_0.3<\/th>\n      <th>quantile_coverage_0.35<\/th>\n      <th>quantile_coverage_0.4<\/th>\n      <th>quantile_coverage_0.45<\/th>\n      <th>quantile_coverage_0.5<\/th>\n      <th>quantile_coverage_0.55<\/th>\n      <th>quantile_coverage_0.6<\/th>\n      <th>quantile_coverage_0.65<\/th>\n      <th>quantile_coverage_0.7<\/th>\n      <th>quantile_coverage_0.75<\/th>\n      <th>quantile_coverage_0.8<\/th>\n      <th>quantile_coverage_0.85<\/th>\n      <th>quantile_coverage_0.9<\/th>\n      <th>quantile_coverage_0.95<\/th>\n      <th>quantile_coverage_0.975<\/th>\n      <th>quantile_coverage_0.99<\/th>\n      <th>coverage_10<\/th>\n      <th>coverage_20<\/th>\n      <th>coverage_30<\/th>\n      <th>coverage_40<\/th>\n      <th>coverage_50<\/th>\n      <th>coverage_60<\/th>\n      <th>coverage_70<\/th>\n      <th>coverage_80<\/th>\n      <th>coverage_90<\/th>\n      <th>coverage_95<\/th>\n      <th>coverage_98<\/th>\n      <th>abs_error<\/th>\n      <th>n_interval_scores<\/th>\n      <th>exists_interval_score_0<\/th>\n      <th>wis<\/th>\n      <th>dispersion<\/th>\n      <th>overprediction<\/th>\n      <th>underprediction<\/th>\n      <th>true_value<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"t","scrollX":true,"fixedColumns":{"leftColumns":2},"columnDefs":[{"className":"dt-right","targets":[8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,45,46,47,48,49]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level3">
<h3 id="visualize-forecast-scores">Visualize forecast scores<a class="anchor" aria-label="anchor" href="#visualize-forecast-scores"></a>
</h3>
<p>We use plotting functions from <code>scoringutils</code> to visualize
different scoring metrics.</p>
<p>Heatmaps are a great way to visualize your data over a large number
of models. The following code provides a skeleton for visualizing the
WIS score of multiple models over the 4 horizons:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">scores</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">model</span>, <span class="va">horizon</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>wis <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">wis</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">scoringutils</span><span class="fu">::</span><span class="fu"><a href="https://epiforecasts.io/scoringutils/reference/plot_heatmap.html" class="external-link">plot_heatmap</a></span><span class="op">(</span>metric <span class="op">=</span> <span class="st">"wis"</span>, x <span class="op">=</span> <span class="st">"horizon"</span><span class="op">)</span></span></code></pre></div>
<p><img src="covidHubUtils-overview_files/figure-html/unnamed-chunk-22-1.png" width="960"></p>
<p>The following snippet of code produce a bar plot for WIS score
components in absolute values for selected models. Each bar is divided
based on the percentage of each component’s contribution to the total
WIS score.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">scores</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span></span>
<span>    dispersion <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">dispersion</span><span class="op">)</span>,</span>
<span>    overprediction <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">overprediction</span><span class="op">)</span>,</span>
<span>    underprediction <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">underprediction</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/as.data.table.html" class="external-link">as.data.table</a></span><span class="op">(</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/melt.data.table.html" class="external-link">melt</a></span><span class="op">(</span><span class="va">.</span>,</span>
<span>                             measure.vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"overprediction"</span>,</span>
<span>                                              <span class="st">"underprediction"</span>,</span>
<span>                                              <span class="st">"dispersion"</span><span class="op">)</span>,</span>
<span>                             variable.name <span class="op">=</span> <span class="st">"wis_component_name"</span>,</span>
<span>                             value.name <span class="op">=</span> <span class="st">"component_value"</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">.</span>, <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes_.html" class="external-link">aes_string</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"model"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span>position <span class="op">=</span> <span class="st">"stack"</span>,</span>
<span>                      <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">component_value</span>, fill <span class="op">=</span> <span class="va">wis_component_name</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"model"</span>, y <span class="op">=</span> <span class="st">"WIS contributions"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_light</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>panel.spacing <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">4</span>, <span class="st">"mm"</span><span class="op">)</span>,</span>
<span>                   axis.text.x <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">90</span>,</span>
<span>                                                       vjust <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                                                       hjust<span class="op">=</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="covidHubUtils-overview_files/figure-html/unnamed-chunk-23-1.png" width="960"></p>
<p>The following snippet of code provides a line graph of coverage rate
for each prediction interval range.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">scores</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"coverage"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>range <span class="op">=</span> <span class="va">name</span>, coverage <span class="op">=</span> <span class="va">value</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">model</span>, <span class="va">range</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>coverage <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">coverage</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">sub</a></span><span class="op">(</span><span class="st">"coverage_"</span>, <span class="st">""</span>, <span class="va">range</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">scoringutils</span><span class="fu">::</span><span class="fu"><a href="https://epiforecasts.io/scoringutils/reference/plot_interval_coverage.html" class="external-link">plot_interval_coverage</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="covidHubUtils-overview_files/figure-html/unnamed-chunk-24-1.png" width="960"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Yijin Serena Wang, Ariane Stark, Evan L Ray, Nikos I. Bosse, Nicholas G. Reich, Nutcha Wattanachit.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
